<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Level 2: Human Practices & Education - Le Grand Jamboree</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            box-sizing: border-box;
            background-color: #f8fafc; /* Base color */
        }
        
        /* Level 1 Theme (RED) */
        .custom-red {
            background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%);
        }
        
        .text-custom-red {
            color: #dc2626;
        }
        
        .custom-gold {
            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
        }
        
        .flip-card {
            perspective: 1000px;
            width: 100%;
            height: 220px;
        }
        
        .flip-card-inner {
            position: relative;
            width: 100%;
            height: 100%;
            text-align: center;
            transition: transform 0.6s;
            transform-style: preserve-3d;
        }
        
        .flip-card.flipped .flip-card-inner {
            transform: rotateY(180deg);
        }
        
        .flip-card-front, .flip-card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 12px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            font-weight: bold;
            cursor: pointer;
        }
        
        .flip-card-front {
            background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%);
            color: white;
        }
        
        .flip-card-back {
            background: white;
            color: #374151;
            border: 2px solid #dc2626;
            transform: rotateY(180deg);
        }
        
        /* Drag & Drop Styles */
        .drag-item {
            cursor: grab;
            transition: all 0.3s ease;
            user-select: none;
            background-color: #fef2f2; 
            border: 1px solid #fca5a5;
            color: #b91c1c;
        }
        
        .drag-item:active {
            cursor: grabbing;
            transform: scale(1.05);
        }
        
        .drag-item.dragging {
            opacity: 0.5;
            transform: rotate(5deg);
        }
        
        .drop-zone {
            transition: all 0.3s ease;
            border: 2px dashed #d1d5db;
            min-height: 80px;
            background-color: #f9fafb;
        }
        
        .drop-zone.drag-over {
            border-color: #f59e0b; 
            background-color: #fffbeb;
            transform: scale(1.02);
        }
        
        .drop-zone.correct {
            border-color: #10b981;
            background-color: #d1fae5;
            border-style: solid;
        }
        
        .drop-zone.incorrect {
            border-color: #ef4444;
            background-color: #fee2e2;
            border-style: solid;
        }

        .sequence-item {
            transition: all 0.3s ease;
            background-color: #dbeafe; 
            border: 1px solid #93c5fd;
            color: #1e40af;
        }

        /* Success Styles */
        .progress-bar {
            transition: width 0.5s ease;
        }
        
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .pulse-success {
            animation: pulseSuccess 0.6s ease;
        }
        
        @keyframes pulseSuccess {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        .sponsor-money {
            animation: moneyPulse 2s infinite;
        }
        
        @keyframes moneyPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }
    </style>
</head>
<body class="min-h-full bg-gray-50 font-sans">
    <header class="bg-white shadow-sm border-b border-gray-100">
        <nav class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <a href="index.html" class="flex items-center space-x-2">
                    <div class="w-8 h-8 custom-red rounded-full flex items-center justify-center">
                        <span class="text-white font-bold text-sm">iG</span>
                    </div>
                    <span class="text-gray-900 font-medium">Le Grand Jamboree</span>
                </a>
                <div class="flex items-center space-x-4">
                    <a href="index.html" class="custom-red text-white px-3 py-1 rounded-md text-sm font-medium hover:bg-red-700 transition duration-150 ease-in-out hover:shadow-lg flex items-center space-x-1">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                            <path d="M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z" />
                        </svg>
                        <span>Menu</span>
                    </a>
                    <div class="text-right">
                        <div class="text-xl font-bold text-gray-900" id="score">0 / 100 pts</div>
                        <div class="text-sm text-gray-600">üí∞ Sponsor: <span id="sponsor-money" class="sponsor-money">‚Ç¨5000</span></div>
                    </div>
                    <div class="w-32 bg-gray-200 rounded-full h-2">
                        <div id="progress-bar" class="progress-bar bg-red-600 h-2 rounded-full" style="width: 0%"></div>
                    </div>
                </div>
            </div>
        </nav>
    </header>

    <main class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <div class="text-center mb-8">
            <h1 class="text-4xl font-bold text-gray-900 mb-4">
                Level 2: Human Practices & Education üåç
            </h1>
            <p class="text-xl text-gray-600 max-w-3xl mx-auto">
                Learn French to engage the community and <strong>Enseigner</strong> your science!
            </p>
        </div>

        <section id="activity-1" class="activity-section mb-12">
            <div class="bg-white rounded-xl shadow-lg p-8">
                <h2 class="text-2xl font-bold text-gray-900 mb-4">üß© 1. Flashcards: iGEM Action Vocabulary</h2>
                <p class="text-gray-600 mb-6">Click all cards to continue. (You'll use these words for the next activities!)</p>
                
                <div class="grid md:grid-cols-3 gap-6" id="flashcards-container">
                    </div>
                
                <div id="flashcard-success" class="hidden mt-6 text-center">
                    <div class="inline-flex items-center px-4 py-2 bg-green-100 text-green-800 rounded-lg mb-4">
                        <span class="mr-2">‚úÖ</span>
                        Excellent! You have mastered the action verbs.
                    </div>
                    <button onclick="completeActivity(1)" class="custom-red text-white px-6 py-2 rounded-lg hover:opacity-90 transition-opacity" disabled id="activity-1-complete">
                        Continue to the Ethics Mission ‚Üí
                    </button>
                </div>
            </div>
        </section>

        <section id="activity-2" class="activity-section mb-12 hidden">
            <div class="bg-white rounded-xl shadow-lg p-8 fade-in">
                <h2 class="text-2xl font-bold mb-4 text-gray-800">Ethics Mission: Save the Sponsor!</h2>
                <p class="text-gray-600 mb-4">The sponsor is panicking! Prove that your team masters <strong>√âthique</strong> by matching the Action to its Key Concept.</p>
                <div class="bg-red-50 border border-red-200 rounded-lg p-4 mb-6">
                    <p class="text-red-700 font-semibold">‚ö†Ô∏è Each mistake = -‚Ç¨1000! Current budget: <span id="current-budget">‚Ç¨5000</span></p>
                </div>

                
                <div class="grid md:grid-cols-2 gap-8">
                    <div>
                        <h3 class="font-semibold mb-4 text-gray-700">Ethical Actions:</h3>
                        <div class="space-y-3">
    <div class="drag-item p-4 rounded-lg border hover:shadow-lg transition-all" draggable="true" data-answer="transparence">
        "I need to explain the risks of the technology to the public."
    </div>
    <div class="drag-item p-4 rounded-lg border hover:shadow-lg transition-all" draggable="true" data-answer="engagement">
        "We will listen to the concerns of the local community."
    </div>
    <div class="drag-item p-4 rounded-lg border hover:shadow-lg transition-all" draggable="true" data-answer="responsabilite">
        "We must share our safety data with other teams."
    </div>
</div>

                    </div>
                    
                    <div>
                        <h3 class="font-semibold mb-4 text-gray-700">Key Concepts (Drop Zones):</h3>
                        <div class="space-y-3">
                            <div class="drop-zone p-6 rounded-lg flex items-center justify-center text-center" data-target="transparence">
                                <div><div class="text-2xl mb-2">üîç</div><div class="text-lg font-semibold text-gray-800">Transparence</div></div>
                            </div>
                            <div class="drop-zone p-6 rounded-lg flex items-center justify-center text-center" data-target="engagement">
                                <div><div class="text-2xl mb-2">ü§ù</div><div class="text-lg font-semibold text-gray-800">Engagement</div></div>
                            </div>
                            <div class="drop-zone p-6 rounded-lg flex items-center justify-center text-center" data-target="responsabilite">
                                <div><div class="text-2xl mb-2">üìã</div><div class="text-lg font-semibold text-gray-800">Responsabilit√©</div></div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div id="matching-success" class="hidden mt-6 text-center">
                    <div class="inline-flex items-center px-4 py-2 bg-green-100 text-green-800 rounded-lg mb-4">
                        <span class="mr-2">üéâ</span>
                        Ethics Mission Accomplished!
                    </div>
                    <button id="activity-2-complete" class="custom-red text-white px-6 py-3 rounded-lg font-semibold hover:opacity-90 transition-opacity" onclick="completeActivity(2)" disabled>
                        ‚úì Continue to the Race Against Time
                    </button>
                </div>
            </div>
        </section>

        <section id="activity-3" class="activity-section mb-12 hidden">
            <div class="bg-white rounded-xl shadow-lg p-8 fade-in">
                <h2 class="text-2xl font-bold mb-4 text-gray-800">üèÉ‚Äç‚ôÇÔ∏è 3. Race Against Time: Perfect Workshop!</h2>
                <p class="text-gray-600 mb-4">You have 30 seconds to organize the steps of the perfect workshop! Drag the steps into the Workshop Timeline (1 to 4) in order.</p>
                <div class="custom-gold text-white rounded-lg p-4 mb-6 text-center">
                    <div class="text-3xl font-bold" id="timer">30</div>
                    <div class="text-sm">seconds remaining</div>
                </div>
                
                <div class="grid md:grid-cols-2 gap-8">
                    <div>
                        <h3 class="font-semibold mb-4 text-gray-700">Steps to Order:</h3>
                        <div class="space-y-3" id="sequence-items">
                            <div class="drag-item sequence-item p-4 rounded-lg border cursor-pointer hover:scale-105 transition-transform" draggable="true" data-order="2">
                                <div class="font-semibold">üìö </div>
                                <div>"Next, teach the basics of the project in a simple way."</div>
                            </div>
                            <div class="drag-item sequence-item p-4 rounded-lg border cursor-pointer hover:scale-105 transition-transform" draggable="true" data-order="4">
                                <div class="font-semibold">üìù </div>
                                <div>"Learn from our mistakes and make a report."</div>
                            </div>
                            <div class="drag-item sequence-item p-4 rounded-lg border cursor-pointer hover:scale-105 transition-transform" draggable="true" data-order="1">
                                <div class="font-semibold">üèóÔ∏è </div>
                                <div>"Organize the room and the materials."</div>
                            </div>
                            <div class="drag-item sequence-item p-4 rounded-lg border cursor-pointer hover:scale-105 transition-transform" draggable="true" data-order="3">
                                <div class="font-semibold">üß™ </div>
                                <div>"Show a small experiment to illustrate the science."</div>
                            </div>
                        </div>
                    </div>
                    
                    <div>
                        <h3 class="font-semibold mb-4 text-gray-700">Workshop Timeline (Drop Zones):</h3>
                        <div class="space-y-3">
                            <div class="drop-zone p-6 rounded-lg border-2 border-dashed border-gray-300" data-position="1">
                                <div class="text-center text-gray-500"><div class="text-2xl mb-2">1Ô∏è‚É£</div><div class="font-semibold">Pr√©paration</div></div>
                            </div>
                            <div class="drop-zone p-6 rounded-lg border-2 border-dashed border-gray-300" data-position="2">
                                <div class="text-center text-gray-500"><div class="text-2xl mb-2">2Ô∏è‚É£</div><div class="font-semibold">Formation</div></div>
                            </div>
                            <div class="drop-zone p-6 rounded-lg border-2 border-dashed border-gray-300" data-position="3">
                                <div class="text-center text-gray-500"><div class="text-2xl mb-2">3Ô∏è‚É£</div><div class="font-semibold">Pratique</div></div>
                            </div>
                            <div class="drop-zone p-6 rounded-lg border-2 border-dashed border-gray-300" data-position="4">
                                <div class="text-center text-gray-500"><div class="text-2xl mb-2">4Ô∏è‚É£</div><div class="font-semibold">√âvaluation</div></div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div id="sequence-success" class="hidden mt-6 text-center">
                    <div class="inline-flex items-center px-4 py-2 bg-green-100 text-green-800 rounded-lg mb-4">
                        <span class="mr-2">üéâ</span>
                        Perfect Workshop!
                    </div>
                    <button id="activity-3-complete" class="custom-red text-white px-6 py-3 rounded-lg font-semibold hover:opacity-90 transition-opacity" onclick="completeActivity(3)" disabled>
                        üéâ Finish the Level!
                    </button>
                </div>
            </div>
        </section>

        <section id="final-results" class="activity-section mb-8 bg-white rounded-lg p-6 shadow-md text-center hidden">
            <h2 class="text-3xl font-bold mb-4 text-green-600">üéâ F√©licitations!</h2>
            <p class="text-xl mb-4">You have mastered the iGEM vocabulary!</p>
            <div class="custom-gold text-white p-6 rounded-lg mb-6">
                <div class="text-2xl font-bold mb-2" id="final-score">Final Score: 0/100</div>
                <div class="text-lg">üèÜ Sponsor Satisfied - Final Budget: <span id="final-sponsor-budget">‚Ç¨5000</span></div>
                <div class="text-sm mt-2">You are ready for the iGEM Jamboree!</div>
            </div>
            <a href="level3.html" class="custom-red text-white px-8 py-4 rounded-lg font-semibold text-lg hover:opacity-90 transition-opacity">
                üöÄ Proceed to Level 3: Oral Presentation
            </a>
        </section>
    </main>

    <script>
        let currentActivity = 1;
        let score = 0;
        let sponsorMoney = 5000;
        let flippedCards = new Set();
        let completedMatches = 0;
        let sequenceComplete = false;
        let timerInterval;
        let timeLeft = 30; // REDUCIDO A 30 SEGUNDOS
        
        // Data for Flashcards (Bilingual)
        const flashcards = [
            { french: "Enseigner", english: "To teach / Enseigner" },
            { french: "√âthique", english: "Ethics / √âthique" },
            { french: "Transparence", english: "Transparency / Transparence" },
            { french: "Engagement", english: "Engagement / Engagement" },
            { french: "Responsabilit√©", english: "Responsibility / Responsabilit√©" },
            { french: "Pr√©paration", english: "Preparation / Pr√©paration" },
            { french: "Formation", english: "Training / Formation" },
            { french: "Pratique", english: "Practice / Pratique" },
            { french: "√âvaluation", english: "Evaluation / √âvaluation" }
        ];

        // --- GAME FLOW FUNCTIONS ---

        function initGame() {
            generateFlashcards();
            initializeDragAndDrop(); 
            updateProgress();
            updateSponsorMoney();
            document.getElementById('score').textContent = `${score} / 100 pts`;
            document.getElementById('activity-1').classList.remove('hidden');
        }

        function generateFlashcards() {
            const container = document.getElementById('flashcards-container');
            container.innerHTML = '';
            
            const cardsToShow = flashcards.slice(0, 9);
            
            cardsToShow.forEach((card, index) => {
                const cardElement = document.createElement('div');
                cardElement.className = 'flip-card';
                cardElement.innerHTML = `
                    <div class="flip-card-inner">
                        <div class="flip-card-front">
                            <div class="text-2xl font-bold mb-2">${card.french}</div>
                            <div class="text-sm opacity-80">Click to view</div>
                        </div>
                        <div class="flip-card-back">
                            <div>
                                <div class="text-lg font-semibold text-gray-800 mb-2">${card.english}</div>
                            </div>
                        </div>
                    </div>
                `;
                
                cardElement.addEventListener('click', () => {
                    if (!cardElement.classList.contains('flipped')) {
                        cardElement.classList.add('flipped');
                        flippedCards.add(card.french);
                        checkFlashcardCompletion();
                    }
                });
                
                container.appendChild(cardElement);
            });
        }
        
        function checkFlashcardCompletion() {
            if (flippedCards.size === 9) {
                document.getElementById('flashcard-success').classList.remove('hidden');
                document.getElementById('activity-1-complete').disabled = false;
                document.getElementById('activity-1-complete').classList.add('pulse-success');
                updateScore(30);
            }
        }
        
        function completeActivity(activityNumber) {
            const currentSection = document.getElementById(`activity-${activityNumber}`);
            
            currentSection.classList.add('hidden');
            
            if (activityNumber === 1) {
                // Flashcards -> Ethics Mission
                document.getElementById('activity-2').classList.remove('hidden');
                document.getElementById('activity-2').classList.add('fade-in');
                currentActivity = 2;
                updateProgress();
            } else if (activityNumber === 2) {
                // Ethics Mission -> Race Against Time
                document.getElementById('activity-3').classList.remove('hidden');
                document.getElementById('activity-3').classList.add('fade-in');
                currentActivity = 3;
                updateProgress();
                startTimer(); // Start the timer for activity 3
            } else if (activityNumber === 3) {
                // Race Against Time -> Final Results
                clearInterval(timerInterval); // Stop the timer
                showFinalResults();
                document.getElementById('final-results').classList.remove('hidden');
                document.getElementById('final-results').classList.add('fade-in');
                currentActivity = 4;
            }
        }

        function updateProgress() {
            const progress = Math.round(((currentActivity - 1) / 3) * 100);
            document.getElementById('progress-bar').style.width = `${progress}%`;
        }

        // --- GAMIFICATION FUNCTIONS ---

        function updateScore(points) {
            score += points;
            document.getElementById('score').textContent = `${score} / 100 pts`;
        }

        function updateSponsorMoney() {
            document.getElementById('sponsor-money').textContent = `‚Ç¨${sponsorMoney}`;
            document.getElementById('current-budget').textContent = `‚Ç¨${sponsorMoney}`;
            if (sponsorMoney <= 3000) {
                document.getElementById('sponsor-money').style.color = '#dc2626'; // Danger Red
            }
        }
        
        function createConfetti() {
            // Function for confetti effect (omitted for brevity, assume it exists or is simple like this)
            for (let i = 0; i < 50; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.left = Math.random() * 100 + 'vw';
                confetti.style.animationDelay = Math.random() * 3 + 's';
                confetti.style.backgroundColor = ['#f59e0b', '#dc2626', '#10b981', '#3b82f6'][Math.floor(Math.random() * 4)];
                document.body.appendChild(confetti);
                
                setTimeout(() => {
                    confetti.remove();
                }, 3000);
            }
        }
        
        function showFinalResults() {
            document.getElementById('final-score').textContent = `Final Score: ${score}/100`;
            document.getElementById('final-sponsor-budget').textContent = `‚Ç¨${sponsorMoney}`;
            createConfetti();
        }

        function startTimer() {
            timeLeft = 30; // 30 SEGUNDOS
            const timerElement = document.getElementById('timer');
            timerElement.textContent = timeLeft;
            timerElement.style.color = '';
            timerElement.classList.remove('pulse-success');

            timerInterval = setInterval(() => {
                timeLeft--;
                timerElement.textContent = timeLeft;
                
                if (timeLeft <= 10) {
                    timerElement.style.color = '#ef4444'; // Red
                    timerElement.classList.add('pulse-success');
                }
                
                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    timerElement.textContent = 'DONE!';
                    timerElement.style.color = '#dc2626';
                }
            }, 1000);
        }
        
        // --- DRAG & DROP FUNCTIONS ---

        function initializeDragAndDrop() {
            const mainContent = document.querySelector('main');
            
            mainContent.addEventListener('dragstart', handleDragStart);
            mainContent.addEventListener('dragend', handleDragEnd);
            mainContent.addEventListener('dragover', handleDragOver);
            mainContent.addEventListener('dragenter', handleDragEnter);
            mainContent.addEventListener('dragleave', handleDragLeave);
            mainContent.addEventListener('drop', handleDrop);
        }

        function handleDragStart(e) {
            const item = e.target.closest('.drag-item');
            if (item && item.draggable) {
                item.classList.add('dragging');
                e.dataTransfer.setData('text/plain', item.dataset.answer || item.dataset.order);
                e.dataTransfer.effectAllowed = 'move';
            } else {
                 e.preventDefault(); 
            }
        }

        function handleDragEnd(e) {
            const item = e.target.closest('.drag-item');
            if (item) {
                item.classList.remove('dragging');
            }
        }

        function handleDragOver(e) {
            const zone = e.target.closest('.drop-zone');
            if (zone) {
                e.preventDefault();
                e.dataTransfer.dropEffect = 'move';
            }
        }

        function handleDragEnter(e) {
            const zone = e.target.closest('.drop-zone');
            if (zone) {
                zone.classList.add('drag-over');
            }
        }

        function handleDragLeave(e) {
            const zone = e.target.closest('.drop-zone');
            if (zone) {
                zone.classList.remove('drag-over');
            }
        }

        function handleDrop(e) {
            const zone = e.target.closest('.drop-zone');
            if (!zone) return;

            e.preventDefault();
            zone.classList.remove('drag-over');
            
            const draggedData = e.dataTransfer.getData('text/plain');
            
            if (currentActivity === 2) {
                handleActivity2Drop(e, draggedData, zone);
            } else if (currentActivity === 3) {
                handleActivity3Drop(e, draggedData, zone);
            }
        }

        function handleActivity2Drop(e, draggedData, zone) {
            const targetType = zone.dataset.target;
            const draggedElement = document.querySelector(`[data-answer="${draggedData}"]`);
            
            if (draggedData === targetType) {
                zone.classList.add('correct');
                zone.classList.remove('incorrect');
                
                const conceptTitleHTML = zone.querySelector('.text-lg').outerHTML;
                const actionText = draggedElement.textContent.trim();
                
                zone.innerHTML = `
                    <div>
                        <div class="text-2xl mb-2">‚úÖ</div>
                        ${conceptTitleHTML}
                        <div class="text-sm text-gray-600 mt-1"><strong>CORRECT:</strong> ${actionText}</div>
                    </div>
                `;
                
                completedMatches++;
                
                if (draggedElement) {
                    draggedElement.style.opacity = '0.3';
                    draggedElement.draggable = false;
                }
                
                if (completedMatches === 3) {
                    document.getElementById('matching-success').classList.remove('hidden');
                    document.getElementById('activity-2-complete').disabled = false;
                    document.getElementById('activity-2-complete').classList.add('pulse-success');
                    updateScore(35);
                }
            } else {
                zone.classList.add('incorrect');
                setTimeout(() => {
                    zone.classList.remove('incorrect');
                }, 1000);
                
                sponsorMoney = Math.max(0, sponsorMoney - 1000);
                updateSponsorMoney();
            }
        }

        function handleActivity3Drop(e, draggedData, zone) {
            const draggedOrder = draggedData;
            const targetPosition = zone.dataset.position;
            const draggedElement = document.querySelector(`#sequence-items [data-order="${draggedOrder}"]`);
            
            if (draggedElement && draggedOrder === targetPosition && zone.children.length < 2) {
                zone.classList.add('correct');
                zone.classList.remove('incorrect');
                
                const stepTitleHTML = draggedElement.querySelector('.font-semibold').innerHTML; // The French word
                const actionText = draggedElement.querySelector('div:last-child').textContent;

                zone.innerHTML = `
                    <div class="text-center text-gray-500">
                        <div class="text-2xl mb-2">üéâ</div>
                        <div class="font-semibold text-green-700">${stepTitleHTML} - CORRECT!</div>
                    </div>
                    <div class="text-sm text-gray-800 p-2 mt-1"><strong>ACTION:</strong> ${actionText}</div>
                `;

                draggedElement.style.opacity = '0.3';
                draggedElement.draggable = false;
                
                const correctDrops = document.querySelectorAll('#activity-3 .drop-zone.correct').length;
                if (correctDrops === 4) {
                    sequenceComplete = true;
                    clearInterval(timerInterval);
                    document.getElementById('sequence-success').classList.remove('hidden');
                    document.getElementById('activity-3-complete').disabled = false;
                    document.getElementById('activity-3-complete').classList.add('pulse-success');
                    updateScore(35);
                }
            } else {
                zone.classList.add('incorrect');
                setTimeout(() => {
                    zone.classList.remove('incorrect');
                }, 1000);
            }
        }


        // Initialisation
        document.addEventListener('DOMContentLoaded', initGame);
    </script>
</body>
</html>